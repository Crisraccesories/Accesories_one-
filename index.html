
// app.js — index.html consume products.json

const grid = document.querySelector("#productos");
const spanAnio = document.querySelector("#anio");
if (spanAnio) spanAnio.textContent = new Date().getFullYear();

function COP(v){ return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(v); }
function isTec(c){ return !['BELLEZA','USO PERSONAL','TERMO','SOMBRILLA'].some(n => (c||'').toUpperCase().includes(n)); }

async function loadIndex() {
  try {
    const r = await fetch("./products.json", { cache: "no-store" });
    const all = await r.json();
    const items = all.filter(p => isTec(p.categoria)).slice(0, 8); // muestra 8 destacados
    grid.innerHTML = items.map(p => `
      <article class="card">
        ${p.img}
        <h3>${p.nombre}</h3>
        <p class="price">${COP(p.precio)}</p>
        tecnologia.htmlVer todo</a>
      </article>
    `).join("");
  } catch (e) {
    console.error(e);
    grid.innerHTML = "<p>Error cargando el catálogo.</p>";
  }
}

if (grid) loadIndex();

